<!DOCTYPE html>

<html lang="es">

<head>

<meta charset="UTF-8" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />

<title>ğŸŒ¸ Flores Interactivas Responsivas</title>

<style>

Â  html, body {

Â  Â  margin: 0; padding: 0; height: 100%;

Â  Â  overflow: hidden;

Â  Â  background: linear-gradient(to bottom, #fff0f5, #ffe6f0);

Â  Â  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;

Â  Â  user-select: none;

Â  }

Â  svg {

Â  Â  position: absolute;

Â  Â  pointer-events: none;

Â  Â  transform-origin: 50% 50%;

Â  Â  animation: girar 25s linear infinite;

Â  Â  transition: transform 1.5s ease-in, opacity 1.5s ease-in;

Â  Â  will-change: transform;

Â  Â  filter: drop-shadow(0 0 3px #ff69b4aa);

Â  }

Â  .flor {

Â  Â  pointer-events: auto;

Â  Â  cursor: pointer;

Â  Â  animation: crecerBrillo 0.8s ease forwards;

Â  Â  will-change: transform, opacity, filter;

Â  Â  width: 12vw;

Â  Â  height: 12vw;

Â  Â  max-width: 100px;

Â  Â  max-height: 100px;

Â  }

Â  .particula {

Â  Â  position: absolute;

Â  Â  pointer-events: none;

Â  Â  border-radius: 50%;

Â  Â  background: #ffd700cc;

Â  Â  box-shadow: 0 0 4px 1.5px #ffdd55bb;

Â  Â  opacity: 0.6;

Â  Â  will-change: transform, opacity;

Â  Â  width: 0.5vw;

Â  Â  height: 0.5vw;

Â  Â  max-width: 6px;

Â  Â  max-height: 6px;

Â  }

Â  @keyframes crecerBrillo {

Â  Â  0% {

Â  Â  Â  transform: scale(0.5);

Â  Â  Â  opacity: 0;

Â  Â  Â  filter: drop-shadow(0 0 0 #fff);

Â  Â  }

Â  Â  50% {

Â  Â  Â  filter: drop-shadow(0 0 8px #ff69b4cc);

Â  Â  }

Â  Â  100% {

Â  Â  Â  transform: scale(1);

Â  Â  Â  opacity: 1;

Â  Â  Â  filter: drop-shadow(0 0 4px #ff69b4aa);

Â  Â  }

Â  }

Â  @keyframes girar {

Â  Â  0% { transform: rotate(0deg);}

Â  Â  100% { transform: rotate(360deg);}

Â  }

Â  #btnLimpiar {

Â  Â  position: fixed;

Â  Â  top: 15px;

Â  Â  right: 15px;

Â  Â  background: #ff69b4;

Â  Â  color: white;

Â  Â  border: none;

Â  Â  padding: 10px 15px;

Â  Â  font-size: 16px;

Â  Â  border-radius: 8px;

Â  Â  cursor: pointer;

Â  Â  box-shadow: 0 4px 6px rgba(0,0,0,0.25);

Â  Â  z-index: 1000;

Â  Â  user-select: none;

Â  }

Â  #btnLimpiar:hover {

Â  Â  background: #ff1493;

Â  }



Â  /* Estilo del nuevo botÃ³n de reproducciÃ³n */

Â  #playMusicButton {

Â  Â  position: fixed;

Â  Â  top: 15px;

Â  Â  left: 15px;

Â  Â  background-color: #4CAF50; /* Verde */

Â  Â  color: white;

Â  Â  border: none;

Â  Â  padding: 10px 15px;

Â  Â  font-size: 16px;

Â  Â  border-radius: 8px;

Â  Â  cursor: pointer;

Â  Â  box-shadow: 0 4px 6px rgba(0,0,0,0.25);

Â  Â  /* Â¡IMPORTANTE! Z-index mÃ¡s alto que cualquier modal */

Â  Â  z-index: 2001; /* Asegura que estÃ© por encima del modal de pregunta (z-index: 2000) */

Â  Â  user-select: none;

Â  }

Â  #playMusicButton:hover {

Â  Â  background-color: #45a049;

Â  }





Â  #modalPregunta {

Â  Â  position: fixed;

Â  Â  top: 0; left: 0;

Â  Â  width: 100%; height: 100%;

Â  Â  background: rgba(0,0,0,0.6);

Â  Â  display: flex;

Â  Â  align-items: center;

Â  Â  justify-content: center;

Â  Â  z-index: 2000; /* Z-index para el modal de pregunta */

Â  }



Â  #modalPregunta > div {

Â  Â  background: white;

Â  Â  padding: 30px;

Â  Â  border-radius: 12px;

Â  Â  text-align: center;

Â  Â  box-shadow: 0 4px 20px rgba(0,0,0,0.3);

Â  Â  position: relative;

Â  Â  width: 300px;

Â  Â  max-width: 90vw;

Â  }



Â  #btnSi, #btnNo {

Â  Â  padding: 10px 20px;

Â  Â  font-size: 16px;

Â  Â  border: none;

Â  Â  border-radius: 6px;

Â  Â  cursor: pointer;

Â  Â  margin: 10px;

Â  Â  user-select: none;

Â  }



Â  #btnSi {

Â  Â  background: #28a745;

Â  Â  color: white;

Â  }



Â  #btnNo {

Â  Â  background: #dc3545;

Â  Â  color: white;

Â  Â  cursor: pointer;

Â  Â  position: fixed; /* para mover libremente */

Â  Â  top: 50%;

Â  Â  left: 50%;

Â  Â  transform: translate(-50%, -50%);

Â  Â  transition: none !important;

Â  }



Â  #mensajeRevelado {

Â  Â  position: fixed;

Â  Â  top: 50%;

Â  Â  left: 50%;

Â  Â  transform: translate(-50%, -50%);

Â  Â  font-size: 2rem;

Â  Â  color: #ff1493;

Â  Â  z-index: 1500;

Â  Â  display: none;

Â  Â  background: rgba(255,255,255,0.9);

Â  Â  padding: 20px 30px;

Â  Â  border-radius: 12px;

Â  Â  box-shadow: 0 4px 15px rgba(0,0,0,0.3);

Â  Â  user-select: none;

Â  }



Â  @keyframes sacudir {

Â  Â  0% { transform: translate(0, 0); }

Â  Â  20% { transform: translate(-5px, 5px); }

Â  Â  40% { transform: translate(5px, -5px); }

Â  Â  60% { transform: translate(-5px, -5px); }

Â  Â  80% { transform: translate(5px, 5px); }

Â  Â  100% { transform: translate(0, 0); }

Â  }



Â  .sacudir {

Â  Â  animation: sacudir 0.4s ease;

Â  }



Â  /* Estilo carta modal */

Â  #modalCarta {

Â  Â  position: fixed;

Â  Â  top: 0; left: 0;

Â  Â  width: 100%; height: 100%;

Â  Â  background: rgba(0,0,0,0.75);

Â  Â  display: none;

Â  Â  align-items: center;

Â  Â  justify-content: center;

Â  Â  z-index: 3000; /* Z-index para el modal de la carta */

Â  Â  overflow-y: auto;

Â  Â  padding: 20px;

Â  }

Â  #modalCarta > div {

Â  Â  background: white;

Â  Â  padding: 30px 40px;

Â  Â  border-radius: 15px;

Â  Â  max-width: 600px;

Â  Â  width: 90vw;

Â  Â  max-height: 80vh;

Â  Â  overflow-y: auto;

Â  Â  font-size: 1.1rem;

Â  Â  line-height: 1.5;

Â  Â  color: #333;

Â  Â  box-shadow: 0 6px 25px rgba(255, 20, 147, 0.3);

Â  Â  position: relative;

Â  }

Â  #modalCarta button.cerrarCarta {

Â  Â  position: absolute;

Â  Â  top: 12px;

Â  Â  right: 12px;

Â  Â  background: #ff1493;

Â  Â  border: none;

Â  Â  color: white;

Â  Â  font-weight: bold;

Â  Â  font-size: 18px;

Â  Â  padding: 6px 12px;

Â  Â  border-radius: 8px;

Â  Â  cursor: pointer;

Â  Â  user-select: none;

Â  }

</style>

</head>

<body>



<audio id="backgroundMusic" src="Stargirl.MP3" loop autoplay></audio>



<button id="playMusicButton">Reproducir MÃºsica</button>

<button id="btnLimpiar">ğŸ§¹ Limpiar Flores</button>



<div id="modalPregunta">

Â  <div>

Â  Â  <h2 id="preguntaTexto">Â¿Quieres leer el mensaje?</h2>

Â  Â  <button id="btnSi">SÃ­</button>

Â  Â  <button id="btnNo">No</button>

Â  </div>

</div>



<div id="mensajeRevelado">Te quiero ğŸ’–</div>



<div id="modalCarta" role="dialog" aria-modal="true" aria-labelledby="tituloCarta">

Â  <div>

Â  Â  <button class="cerrarCarta" aria-label="Cerrar carta">Ã—</button>

Â  Â  <h2 id="tituloCarta">--> ...Â¿Se terminÃ³ o solo es un gran respiro?<br></h2>

Â  Â  <p>

Â  Â  Â  Hannia.<br><br>

Â  Â  Â  SÃ© que no hemos hablado, no fui la persona, que el contacto ha sido limitado, pero el sentimiento no ha cambiado, siento que se ha transformado, se ha hecho mÃ¡s claro, mÃ¡s profundo.<br>

Â  Â  Â  Esto no es solo un mensaje, es una forma de decirte que sigo aquÃ­, con cariÃ±o, sintiendo un ambiente tranquilo.<br>

Â  Â  Â  "Te quiero tanto, que aprendÃ­ a amarte desde lejos, mientras mis manos aÃºn ansÃ­an tocarte."<br><br>

Â  Â  Â  Han sido dÃ­as extraÃ±os, llenos de reflexiÃ³n, me he dedicado a mÃ­, a conocerme mejor, a mirar hacia dentro y creeme ha sido maravilloso.<br>

Â  Â  Â  He descubierto partes de mÃ­ que tenÃ­a olvidadas, entendido errores, abrazando virtudes, reconstruido sueÃ±os y metas.<br>

Â  Â  Â  Y aunque esta distancia ha dolido, tambiÃ©n ha sido lo mÃ¡s sano que hemos hecho, por eso te escribo desde el respeto, desde la calma, y poder expresarme de la manera que he aprendido.<br>

Â  Â  Â  Ya no te extraÃ±o como antes, no desde el apego que llegue a mostrar, sino desde la admiraciÃ³n, te pienso y deseo que estÃ©s bien, que brilles como siempre.<br>

Â  Â  Â  Mereces lo mejor del mundo.<br>

Â  Â  Â  Y aunque muchas veces me dije que ese â€œmejorâ€ debÃ­a ser alguien mÃ¡s... hoy en realidad espero convertirme en esa persona (aclaro que no tiene que ser como lo solia decir).<br><br>

Â  Â  Â  OjalÃ¡, en algÃºn momento, me sientas, notes mi ausencia como yo noto la tuya, no con tristeza, sino con ese sentimiento que tanto te hace notar.<br>

Â  Â  Â  Porque a pesar de todo, en el fondo yo espero y sigo deseando encontrarte.<br>

Â  Â  Â  No desde donde lo dejamos, sino desde otro lugar, uno mÃ¡s libre, mÃ¡s maduro, mÃ¡s verdadero y poder hablarnos, nadie sabra cuando, donde, o en que momento.<br><br>

Â  Â  Â  Por eso te pregunto, tu crees que ... ---<br>

Â  Â  Â  Con cariÃ±o,<br>

Â  Â  Â  Alan.

Â  Â  </p>

Â  </div>

</div>



<script>

Â  const ns = "http://www.w3.org/2000/svg";

Â  const PARTICULAS_POR_FLOR = 12;

Â  const PARTICULA_SIZE_VW = 0.5;

Â  const REACCION_DISTANCIA_VW = 15;



Â  let flores = [];



Â  const backgroundMusic = document.getElementById("backgroundMusic");

Â  const playMusicButton = document.getElementById("playMusicButton"); // Referencia al nuevo botÃ³n



Â  // FunciÃ³n para intentar reproducir la mÃºsica

Â  function tryPlayMusic() {

Â  Â  backgroundMusic.play().then(() => {

Â  Â  Â  console.log("Audio reproducido con Ã©xito.");

Â  Â  Â  if (playMusicButton) {

Â  Â  Â  Â  playMusicButton.style.display = 'none'; // Oculta el botÃ³n si la reproducciÃ³n es exitosa

Â  Â  Â  }

Â  Â  }).catch(error => {

Â  Â  Â  console.log("Error al intentar reproducir el audio:", error);

Â  Â  Â  if (playMusicButton) {

Â  Â  Â  Â  playMusicButton.style.display = 'block'; // Asegura que el botÃ³n sea visible si falla el autoplay

Â  Â  Â  }

Â  Â  });

Â  }



Â  // Event listener para el nuevo botÃ³n de reproducciÃ³n

Â  if (playMusicButton) {

Â  Â  playMusicButton.addEventListener("click", () => {

Â  Â  Â  tryPlayMusic();

Â  Â  });

Â  }



Â  function crearPetalo(svg, cx, cy, rx, ry, fill, rot) {

Â  Â  const path = document.createElementNS(ns, "path");

Â  Â  const d = `

Â  Â  Â  M ${cx} ${cy}

Â  Â  Â  C ${cx + rx/2} ${cy - ry/2}, ${cx + rx} ${cy + ry/3}, ${cx} ${cy + ry}

Â  Â  Â  C ${cx - rx} ${cy + ry/3}, ${cx - rx/2} ${cy - ry/2}, ${cx} ${cy}

Â  Â  Â  Z

Â  Â  `;

Â  Â  path.setAttribute("d", d);

Â  Â  path.setAttribute("fill", fill);

Â  Â  path.setAttribute("transform", `rotate(${rot} 50 50)`);

Â  Â  svg.appendChild(path);

Â  }



Â  function florRosa(svg) {

Â  Â  const petalColors = ["rgba(219,112,147,0.8)", "rgba(199,21,133,0.85)", "rgba(219,112,147,0.7)", "rgba(208,32,144,0.9)"];

Â  Â  for (let i = 0; i < 8; i++) {

Â  Â  Â  crearPetalo(svg, 50, 30, 12, 35, petalColors[i % petalColors.length], i * 45);

Â  Â  }

Â  Â  const centro = document.createElementNS(ns, "circle");

Â  Â  centro.setAttribute("cx", 50);

Â  Â  centro.setAttribute("cy", 50);

Â  Â  centro.setAttribute("r", 13);

Â  Â  centro.setAttribute("fill", "gold");

Â  Â  centro.setAttribute("filter", "url(#sombraCentro)");

Â  Â  svg.appendChild(centro);

Â  }



Â  function florGirasol(svg) {

Â  Â  for (let i = 0; i < 12; i++) {

Â  Â  Â  crearPetalo(svg, 50, 25, 6, 25, "#ffda44", i * 30);

Â  Â  }

Â  Â  const centro = document.createElementNS(ns, "circle");

Â  Â  centro.setAttribute("cx", 50);

Â  Â  centro.setAttribute("cy", 50);

Â  Â  centro.setAttribute("r", 15);

Â  Â  centro.setAttribute("fill", "#8b4513");

Â  Â  svg.appendChild(centro);

Â  }



Â  function florPastelAzul(svg) {

Â  Â  const colores = ["#a3c9f1", "#7fb0f7", "#9fc4f8"];

Â  Â  for(let i=0; i<10; i++) {

Â  Â  Â  crearPetalo(svg, 50, 35, 10, 28, colores[i % colores.length], i * 36);

Â  Â  }

Â  Â  const centro = document.createElementNS(ns, "circle");

Â  Â  centro.setAttribute("cx", 50);

Â  Â  centro.setAttribute("cy", 50);

Â  Â  centro.setAttribute("r", 12);

Â  Â  centro.setAttribute("fill", "#bdd7f5");

Â  Â  svg.appendChild(centro);

Â  }



Â  function florPastelLavanda(svg) {

Â  Â  const colores = ["#c3a0f7", "#b27ff7", "#d1b3fa"];

Â  Â  for(let i=0; i<10; i++) {

Â  Â  Â  crearPetalo(svg, 50, 35, 10, 28, colores[i % colores.length], i * 36);

Â  Â  }

Â  Â  const centro = document.createElementNS(ns, "circle");

Â  Â  centro.setAttribute("cx", 50);

Â  Â  centro.setAttribute("cy", 50);

Â  Â  centro.setAttribute("r", 12);

Â  Â  centro.setAttribute("fill", "#d8c4f8");

Â  Â  svg.appendChild(centro);

Â  }



Â  const tiposFlores = [florRosa, florGirasol, florPastelAzul, florPastelLavanda];



Â  function crearFiltroSombra() {

Â  Â  if (document.getElementById("filtroSombra")) return;

Â  Â  const defs = document.createElementNS(ns, "defs");

Â  Â  defs.setAttribute("id", "filtroSombra");

Â  Â  const filter = document.createElementNS(ns, "filter");

Â  Â  filter.setAttribute("id", "sombraCentro");

Â  Â  const feDropShadow = document.createElementNS(ns, "feDropShadow");

Â  Â  feDropShadow.setAttribute("dx", "0");

Â  Â  feDropShadow.setAttribute("dy", "0");

Â  Â  feDropShadow.setAttribute("stdDeviation", "2");

Â  Â  feDropShadow.setAttribute("flood-color", "rgba(0,0,0,0.2)");

Â  Â  filter.appendChild(feDropShadow);

Â  Â  defs.appendChild(filter);

Â  Â  document.body.appendChild(defs);

Â  }



Â  function vwAPx(vw) {

Â  Â  return window.innerWidth * (vw / 100);

Â  }



Â  function crearFlor(x, y) {

Â  Â  crearFiltroSombra();

Â  Â  const svg = document.createElementNS(ns, "svg");

Â  Â  svg.setAttribute("class", "flor");

Â  Â  svg.setAttribute("width", "100");

Â  Â  svg.setAttribute("height", "100");

Â  Â  svg.style.left = `${x}px`;

Â  Â  svg.style.top = `${y}px`;

Â  Â  svg.style.position = "absolute";



Â  Â  const florFunc = tiposFlores[Math.floor(Math.random() * tiposFlores.length)];

Â  Â  florFunc(svg);



Â  Â  const florObj = {

Â  Â  Â  elem: svg,

Â  Â  Â  x, y,

Â  Â  Â  particulas: [],

Â  Â  Â  offsetX: 0,

Â  Â  Â  offsetY: 0,

Â  Â  };



Â  Â  for(let i = 0; i < PARTICULAS_POR_FLOR; i++) {

Â  Â  Â  const part = document.createElement("div");

Â  Â  Â  part.classList.add("particula");

Â  Â  Â  const angle = Math.random() * 2 * Math.PI;

Â  Â  Â  const radiusPX = vwAPx(3 + Math.random() * 4);

Â  Â  Â  part.style.left = `${x + Math.cos(angle) * radiusPX}px`;

Â  Â  Â  part.style.top = `${y + Math.sin(angle) * radiusPX}px`;

Â  Â  Â  part.style.width = part.style.height = `${PARTICULA_SIZE_VW}vw`;

Â  Â  Â  document.body.appendChild(part);

Â  Â  Â  florObj.particulas.push({

Â  Â  Â  Â  elem: part,

Â  Â  Â  Â  angle,

Â  Â  Â  Â  radius: radiusPX,

Â  Â  Â  Â  baseX: x,

Â  Â  Â  Â  baseY: y,

Â  Â  Â  Â  speed: 0.004 + Math.random()*0.006

Â  Â  Â  });

Â  Â  }



Â  Â  svg.addEventListener("click", (e) => {

Â  Â  Â  e.stopPropagation();

Â  Â  Â  const numNuevas = 15 + Math.floor(Math.random() * 15);

Â  Â  Â  for (let i = 0; i < numNuevas; i++) {

Â  Â  Â  Â  const marginPX = vwAPx(10);

Â  Â  Â  Â  const dx = marginPX + Math.random() * (window.innerWidth - 2 * marginPX);

Â  Â  Â  Â  const dy = marginPX + Math.random() * (window.innerHeight - 2 * marginPX);

Â  Â  Â  Â  crearFlor(dx, dy);

Â  Â  Â  }

Â  Â  Â  svg.style.transform += " translateY(300px) rotate(90deg) scale(0)";

Â  Â  Â  svg.style.opacity = "0";

Â  Â  Â  florObj.particulas.forEach(p => p.elem.remove());

Â  Â  Â  setTimeout(() => {

Â  Â  Â  Â  svg.remove();

Â  Â  Â  Â  flores = flores.filter(f => f !== florObj);

Â  Â  Â  }, 1500);

Â  Â  });



Â  Â  document.body.appendChild(svg);

Â  Â  flores.push(florObj);

Â  }



Â  let mouseX = -1000;

Â  let mouseY = -1000;



Â  window.addEventListener("mousemove", e => {

Â  Â  mouseX = e.clientX;

Â  Â  mouseY = e.clientY;

Â  });



Â  function animar() {

Â  Â  flores.forEach(flor => {

Â  Â  Â  const dx = mouseX - flor.x;

Â  Â  Â  const dy = mouseY - flor.y;

Â  Â  Â  const dist = Math.sqrt(dx*dx + dy*dy);

Â  Â  Â  const maxDist = vwAPx(REACCION_DISTANCIA_VW);

Â  Â  Â  if(dist < maxDist) {

Â  Â  Â  Â  const fuerza = (maxDist - dist) / maxDist * 10;

Â  Â  Â  Â  flor.offsetX += (dx/dist) * fuerza * 0.1;

Â  Â  Â  Â  flor.offsetY += (dy/dist) * fuerza * 0.1;

Â  Â  Â  } else {

Â  Â  Â  Â  flor.offsetX += (0 - flor.offsetX) * 0.05;

Â  Â  Â  Â  flor.offsetY += (0 - flor.offsetY) * 0.05;

Â  Â  Â  }

Â  Â  Â  flor.offsetX = Math.max(-15, Math.min(15, flor.offsetX));

Â  Â  Â  flor.offsetY = Math.max(-15, Math.min(15, flor.offsetY));

Â  Â  Â  flor.elem.style.transform = `translate(${flor.offsetX}px, ${flor.offsetY}px) rotate(${(performance.now()/50)%360}deg) scale(1)`;

Â  Â  Â  flor.particulas.forEach(p => {

Â  Â  Â  Â  p.angle += p.speed;

Â  Â  Â  Â  const px = flor.x + Math.cos(p.angle) * p.radius + flor.offsetX;

Â  Â  Â  Â  const py = flor.y + Math.sin(p.angle) * p.radius + flor.offsetY;

Â  Â  Â  Â  p.elem.style.left = `${px - vwAPx(PARTICULA_SIZE_VW)/2}px`;

Â  Â  Â  Â  p.elem.style.top = `${py - vwAPx(PARTICULA_SIZE_VW)/2}px`;

Â  Â  Â  Â  p.elem.style.opacity = 0.5 + 0.4 * Math.sin(p.angle * 10);

Â  Â  Â  });

Â  Â  });

Â  Â  requestAnimationFrame(animar);

Â  }



Â  function limpiarFlores() {

Â  Â  flores.forEach(flor => {

Â  Â  Â  flor.particulas.forEach(p => p.elem.remove());

Â  Â  Â  flor.elem.remove();

Â  Â  });

Â  Â  flores = [];

Â  Â  crearFlor(window.innerWidth / 2, window.innerHeight / 2);

Â  }



Â  document.getElementById("btnLimpiar").onclick = limpiarFlores;



Â  // MODAL INTERACTIVO



Â  const modal = document.getElementById("modalPregunta");

Â  const btnSi = document.getElementById("btnSi");

Â  const btnNo = document.getElementById("btnNo");

Â  const mensaje = document.getElementById("mensajeRevelado");

Â  const modalCarta = document.getElementById("modalCarta");

Â  const cerrarCartaBtn = modalCarta.querySelector(".cerrarCarta");

Â  const preguntaTexto = document.getElementById("preguntaTexto");



Â  // Estados de confirmacion (los textos que quieres mostrar paso a paso)

Â  const confirmaciones = [

Â  Â  "Â¿Quieres leer el mensaje?",

Â  Â  "Â¿EstÃ¡s segura?",

Â  Â  "Â¿Muy muy segura?",

Â  Â  "Â¿EstÃ¡s pero muy segura de leer la carta?"

Â  ];

Â  let pasoActual = 0;



Â  btnSi.addEventListener("click", () => {

Â  Â  pasoActual++;

Â  Â  if(pasoActual < confirmaciones.length) {

Â  Â  Â  preguntaTexto.textContent = confirmaciones[pasoActual];

Â  Â  } else {

Â  Â  Â  // Se terminÃ³ el ciclo de confirmaciones, mostrar la carta

Â  Â  Â  modal.style.display = "none";

Â  Â  Â  modalCarta.style.display = "flex";

Â  Â  Â  // La mÃºsica ya no se intenta reproducir aquÃ­, la maneja el botÃ³n "Reproducir MÃºsica"

Â  Â  }

Â  });



Â  btnNo.addEventListener("mouseenter", moverBoton);

Â  btnNo.addEventListener("mousemove", moverBoton);



Â  function moverBoton() {

Â  Â  const contenedor = modal.querySelector("div");

Â  Â  const maxX = contenedor.clientWidth - btnNo.offsetWidth;

Â  Â  const maxY = contenedor.clientHeight - btnNo.offsetHeight;

Â  Â  btnNo.style.position = "absolute";

Â  Â  btnNo.style.left = Math.random() * maxX + "px";

Â  Â  btnNo.style.top = Math.random() * maxY + "px";



Â  Â  // Sacudir el botÃ³n para que sea mÃ¡s evidente

Â  Â  btnNo.classList.add("sacudir");

Â  Â  setTimeout(() => btnNo.classList.remove("sacudir"), 400);



Â  Â  // Crear entre 3 y 6 flores aleatorias en pantalla

Â  Â  const cantidad = 3 + Math.floor(Math.random() * 4);

Â  Â  for (let i = 0; i < cantidad; i++) {

Â  Â  Â  const x = Math.random() * window.innerWidth;

Â  Â  Â  const y = Math.random() * window.innerHeight;

Â  Â  Â  crearFlor(x, y);

Â  Â  }

Â  }



Â  cerrarCartaBtn.addEventListener("click", () => {

Â  Â  modalCarta.style.display = "none";

Â  Â  // Pausar la mÃºsica si se cierra la carta

Â  Â  backgroundMusic.pause();

Â  Â  // Asegurarse de que el botÃ³n de mÃºsica sea visible de nuevo

Â  Â  if (playMusicButton) {

Â  Â  Â  Â  playMusicButton.style.display = 'block';

Â  Â  }

Â  Â  // Opcional: reiniciar confirmacion para que pueda repetir si quiere

Â  Â  pasoActual = 0;

Â  Â  preguntaTexto.textContent = confirmaciones[0];

Â  Â  modal.style.display = "flex";

Â  });



Â  function iniciar() {

Â  Â  crearFiltroSombra();

Â  Â  crearFlor(window.innerWidth / 2, window.innerHeight / 2);

Â  Â  animar();

Â  Â  // La mÃºsica NO se intenta reproducir al inicio. El usuario debe hacer clic en el botÃ³n.

Â  }



Â  window.onload = iniciar;



Â  document.body.addEventListener("click", e => {

Â  Â  if (e.target.id === "btnLimpiar" || e.target.closest("#modalPregunta") || e.target.closest("#modalCarta") || e.target.id === "playMusicButton") return;

Â  Â  crearFlor(e.clientX, e.clientY);

Â  });



Â  window.addEventListener("resize", () => {

Â  Â  flores.forEach(flor => {

Â  Â  Â  if(flor.x > window.innerWidth) flor.x = window.innerWidth - 100;

Â  Â  Â  if(flor.y > window.innerHeight) flor.y = window.innerHeight - 100;

Â  Â  Â  flor.elem.style.left = `${flor.x}px`;

Â  Â  Â  flor.elem.style.top = `${flor.y}px`;

Â  Â  Â  flor.particulas.forEach(p => {

Â  Â  Â  Â  p.baseX = flor.x;

Â  Â  Â  Â  p.baseY = flor.y;

Â  Â  Â  });

Â  Â  });

Â  });

</script>



</body>

</html>
